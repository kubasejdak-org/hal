.Run_Test:
  stage: test
  variables:
    GIT_STRATEGY: none
  script:
    - cd ${AppArtifact}/bin
    - ./${App} ${TestTags}

.Run_Test_Linux:
  extends: .Run_Test
  tags:
    - linux
    - shared
  image: kubasejdak/gcc:latest

.Run_Test_Linux_ARM:
  extends: .Run_Test
  image: kubasejdak/arm-tests:latest
  tags:
    - raspberrypi

GpioSet1_Linux_ARM_UT:
  extends: .Run_Test_Linux_ARM
  tags:
    - raspberrypi
    - gpio
  dependencies:
    - GpioSet1_Linux_ARM_GCC_Debug_Build
  variables:
    AppArtifact: "GpioSet1_Linux_ARM_GCC_Debug_Build"
    App: "gpio-set1"

GpioSet2_Linux_ARM_UT:
  extends: .Run_Test_Linux_ARM
  tags:
    - raspberrypi
    - gpio
  dependencies:
    - GpioSet2_Linux_ARM_GCC_Debug_Build
  variables:
    AppArtifact: "GpioSet2_Linux_ARM_GCC_Debug_Build"
    App: "gpio-set2"

Middleware_Linux_ARM_UT:
  extends: .Run_Test_Linux_ARM
  dependencies:
    - Middleware_Linux_ARM_GCC_Debug_Build
  variables:
    AppArtifact: "Middleware_Linux_ARM_GCC_Debug_Build"
    App: "middleware"

Middleware_Linux_UT:
  extends: .Run_Test_Linux
  dependencies:
    - Middleware_Linux_GCC_Debug_Build
  variables:
    AppArtifact: "Middleware_Linux_GCC_Debug_Build"
    App: "middleware"
